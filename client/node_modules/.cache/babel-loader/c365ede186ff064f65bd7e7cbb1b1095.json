{"ast":null,"code":"import _classCallCheck from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\src\\\\OAuth.js\";\nimport React, { Component } from 'react';\nimport FontAwesome from 'react-fontawesome';\nimport { API_URL } from './config';\n\nvar OAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OAuth, _Component);\n\n  function OAuth() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, OAuth);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(OAuth)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: {},\n      disabled: ''\n    };\n    return _this;\n  }\n\n  _createClass(OAuth, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          socket = _this$props.socket,\n          provider = _this$props.provider;\n      socket.on(provider, function (user) {\n        _this2.popup.close();\n\n        _this2.setState({\n          user: user\n        });\n\n        console.log(user);\n      });\n    }\n  }, {\n    key: \"checkPopup\",\n    value: function checkPopup() {\n      var _this3 = this;\n\n      var check = setInterval(function () {\n        var popup = _this3.popup;\n\n        if (!popup || popup.closed || popup.closed === undefined) {\n          clearInterval(check);\n\n          _this3.setState({\n            disabled: ''\n          });\n        }\n      }, 1000);\n    } // Launches the popup by making a request to the server and then \n    // passes along the socket id so it can be used to send back user \n    // data to the appropriate socket on the connected client.\n\n  }, {\n    key: \"openPopup\",\n    value: function openPopup() {\n      var _this$props2 = this.props,\n          provider = _this$props2.provider,\n          socket = _this$props2.socket;\n      var width = 600,\n          height = 600;\n      var left = window.innerWidth / 2 - width / 2;\n      var top = window.innerHeight / 2 - height / 2;\n      var url = \"\".concat(API_URL, \"/\").concat(provider, \"?socketId=\").concat(socket.id);\n      return window.open(url, '', \"toolbar=no, location=no, directories=no, status=no, menubar=no, \\n        scrollbars=no, resizable=no, copyhistory=no, width=\".concat(width, \", \\n        height=\").concat(height, \", top=\").concat(top, \", left=\").concat(left));\n    } // Kicks off the processes of opening the popup on the server and listening \n    // to the popup. It also disables the login button so the user can not \n    // attempt to login to the provider twice.\n\n  }, {\n    key: \"startAuth\",\n    value: function startAuth(e) {\n      if (!this.state.disabled) {\n        e.preventDefault();\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    }\n  }, {\n    key: \"closeCard\",\n    value: function closeCard() {\n      this.setState({\n        user: {}\n      });\n    } // render method to follow\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state$user = this.state.user,\n          name = _this$state$user.name,\n          photo = _this$state$user.photo;\n      var provider = this.props.provider;\n      var disabled = this.state.disabled;\n      var atSymbol = provider === 'twitter' ? '@' : '';\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, name ? React.createElement(\"div\", {\n        className: 'card',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: photo,\n        alt: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(FontAwesome, {\n        name: 'times-circle',\n        className: 'close',\n        onClick: this.closeCard.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"\".concat(atSymbol).concat(name))) : React.createElement(\"div\", {\n        className: 'button-wrapper fadein-fast',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.startAuth.bind(this),\n        className: \"\".concat(provider, \" \").concat(disabled, \" button\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(FontAwesome, {\n        name: provider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OAuth;\n}(Component);\n\nexport { OAuth as default };","map":{"version":3,"sources":["F:/Web/ReactJS/ReactMessage/message1/client/src/OAuth.js"],"names":["React","Component","FontAwesome","API_URL","OAuth","state","user","disabled","props","socket","provider","on","popup","close","setState","console","log","check","setInterval","closed","undefined","clearInterval","width","height","left","window","innerWidth","top","innerHeight","url","id","open","e","preventDefault","openPopup","checkPopup","name","photo","atSymbol","closeCard","bind","startAuth"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,SAASC,OAAT,QAAwB,UAAxB;;IAEqBC,K;;;;;;;;;;;;;;;;;UAEnBC,K,GAAQ;AACNC,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,QAAQ,EAAE;AAFJ,K;;;;;;wCAKY;AAAA;;AAAA,wBACW,KAAKC,KADhB;AAAA,UACVC,MADU,eACVA,MADU;AAAA,UACFC,QADE,eACFA,QADE;AAGlBD,MAAAA,MAAM,CAACE,EAAP,CAAUD,QAAV,EAAoB,UAAAJ,IAAI,EAAI;AAC1B,QAAA,MAAI,CAACM,KAAL,CAAWC,KAAX;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AAACR,UAAAA,IAAI,EAAJA;AAAD,SAAd;;AACAS,QAAAA,OAAO,CAACC,GAAR,CAAYV,IAAZ;AACD,OAJD;AAKD;;;iCACc;AAAA;;AACX,UAAMW,KAAK,GAAGC,WAAW,CAAC,YAAM;AAAA,YACtBN,KADsB,GACZ,MADY,CACtBA,KADsB;;AAE9B,YAAI,CAACA,KAAD,IAAUA,KAAK,CAACO,MAAhB,IAA0BP,KAAK,CAACO,MAAN,KAAiBC,SAA/C,EAA0D;AACxDC,UAAAA,aAAa,CAACJ,KAAD,CAAb;;AACA,UAAA,MAAI,CAACH,QAAL,CAAc;AAAEP,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD;AACF,OANwB,EAMtB,IANsB,CAAzB;AAOD,K,CAED;AACA;AACA;;;;gCACY;AAAA,yBACmB,KAAKC,KADxB;AAAA,UACFE,QADE,gBACFA,QADE;AAAA,UACQD,MADR,gBACQA,MADR;AAEV,UAAMa,KAAK,GAAG,GAAd;AAAA,UAAmBC,MAAM,GAAG,GAA5B;AACA,UAAMC,IAAI,GAAIC,MAAM,CAACC,UAAP,GAAoB,CAArB,GAA2BJ,KAAK,GAAG,CAAhD;AACA,UAAMK,GAAG,GAAIF,MAAM,CAACG,WAAP,GAAqB,CAAtB,GAA4BL,MAAM,GAAG,CAAjD;AACA,UAAMM,GAAG,aAAM1B,OAAN,cAAiBO,QAAjB,uBAAsCD,MAAM,CAACqB,EAA7C,CAAT;AAEA,aAAOL,MAAM,CAACM,IAAP,CAAYF,GAAZ,EAAiB,EAAjB,yIAEgDP,KAFhD,gCAGIC,MAHJ,mBAGmBI,GAHnB,oBAGgCH,IAHhC,EAAP;AAKD,K,CAED;AACA;AACA;;;;8BACUQ,C,EAAG;AACX,UAAI,CAAC,KAAK3B,KAAL,CAAWE,QAAhB,EAA0B;AACxByB,QAAAA,CAAC,CAACC,cAAF;AACA,aAAKrB,KAAL,GAAa,KAAKsB,SAAL,EAAb;AACA,aAAKC,UAAL;AACA,aAAKrB,QAAL,CAAc;AAACP,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACD;AACF;;;gCAEW;AACV,WAAKO,QAAL,CAAc;AAACR,QAAAA,IAAI,EAAE;AAAP,OAAd;AACD,K,CAED;;;;6BACS;AAAA,6BACkB,KAAKD,KAAL,CAAWC,IAD7B;AAAA,UACG8B,IADH,oBACGA,IADH;AAAA,UACSC,KADT,oBACSA,KADT;AAAA,UAEG3B,QAFH,GAEgB,KAAKF,KAFrB,CAEGE,QAFH;AAAA,UAGGH,QAHH,GAGgB,KAAKF,KAHrB,CAGGE,QAHH;AAIL,UAAM+B,QAAQ,GAAG5B,QAAQ,KAAK,SAAb,GAAyB,GAAzB,GAA+B,EAAhD;AAEA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG0B,IAAI,GACD;AAAK,QAAA,SAAS,EAAE,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAEC,KAAV;AAAiB,QAAA,GAAG,EAAED,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,WAAD;AACE,QAAA,IAAI,EAAE,cADR;AAEE,QAAA,SAAS,EAAE,OAFb;AAGE,QAAA,OAAO,EAAE,KAAKG,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAQF,QAAR,SAAmBF,IAAnB,EAPF,CADC,GAUD;AAAK,QAAA,SAAS,EAAE,4BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,OAAO,EAAE,KAAKK,SAAL,CAAeD,IAAf,CAAoB,IAApB,CADX;AAEE,QAAA,SAAS,YAAK9B,QAAL,cAAiBH,QAAjB,YAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AACE,QAAA,IAAI,EAAEG,QADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF,CAXN,CADF;AAyBD;;;;EA3F4BT,S;;SAAdG,K","sourcesContent":["import React, { Component } from 'react'\r\nimport FontAwesome from 'react-fontawesome'\r\nimport { API_URL } from './config'\r\n\r\nexport default class OAuth extends Component {\r\n  \r\n  state = {\r\n    user: {},\r\n    disabled: ''\r\n  }  \r\n\r\n  componentDidMount() {\r\n    const { socket, provider } = this.props\r\n\r\n    socket.on(provider, user => {  \r\n      this.popup.close()\r\n      this.setState({user})\r\n      console.log(user);\r\n    })\r\n  }\r\n    checkPopup() {\r\n      const check = setInterval(() => {\r\n        const { popup } = this\r\n        if (!popup || popup.closed || popup.closed === undefined) {\r\n          clearInterval(check)\r\n          this.setState({ disabled: ''})\r\n        }\r\n      }, 1000)\r\n    }\r\n    \r\n    // Launches the popup by making a request to the server and then \r\n    // passes along the socket id so it can be used to send back user \r\n    // data to the appropriate socket on the connected client.\r\n    openPopup() {\r\n      const { provider, socket } = this.props\r\n      const width = 600, height = 600\r\n      const left = (window.innerWidth / 2) - (width / 2)\r\n      const top = (window.innerHeight / 2) - (height / 2)\r\n      const url = `${API_URL}/${provider}?socketId=${socket.id}`\r\n  \r\n      return window.open(url, '',       \r\n        `toolbar=no, location=no, directories=no, status=no, menubar=no, \r\n        scrollbars=no, resizable=no, copyhistory=no, width=${width}, \r\n        height=${height}, top=${top}, left=${left}`\r\n      )\r\n    }\r\n  \r\n    // Kicks off the processes of opening the popup on the server and listening \r\n    // to the popup. It also disables the login button so the user can not \r\n    // attempt to login to the provider twice.\r\n    startAuth(e) {\r\n      if (!this.state.disabled) {\r\n        e.preventDefault()\r\n        this.popup = this.openPopup()  \r\n        this.checkPopup()\r\n        this.setState({disabled: 'disabled'})\r\n      }\r\n    }\r\n  \r\n    closeCard() {\r\n      this.setState({user: {}})\r\n    }\r\n  \r\n    // render method to follow\r\n    render() {\r\n        const { name, photo} = this.state.user\r\n        const { provider } = this.props\r\n        const { disabled } = this.state\r\n        const atSymbol = provider === 'twitter' ? '@' : ''\r\n        \r\n        return (\r\n          <div>\r\n            {name\r\n              ? <div className={'card'}>              \r\n                  <img src={photo} alt={name} />\r\n                  <FontAwesome\r\n                    name={'times-circle'}\r\n                    className={'close'}\r\n                    onClick={this.closeCard.bind(this)}\r\n                  />\r\n                  <h4>{`${atSymbol}${name}`}</h4>\r\n                </div>\r\n              : <div className={'button-wrapper fadein-fast'}>\r\n                  <button \r\n                    onClick={this.startAuth.bind(this)} \r\n                    className={`${provider} ${disabled} button`}\r\n                  >\r\n                    <FontAwesome\r\n                      name={provider}\r\n                    />\r\n                  </button>\r\n                </div>\r\n            }\r\n          </div>\r\n        )\r\n      }\r\n  }"]},"metadata":{},"sourceType":"module"}