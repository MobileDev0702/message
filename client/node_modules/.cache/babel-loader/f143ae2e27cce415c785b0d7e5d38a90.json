{"ast":null,"code":"import _classCallCheck from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\Web\\\\ReactJS\\\\ReactMessage\\\\message1\\\\client\\\\src\\\\OAuth.js\";\n\nvar OAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OAuth, _Component);\n\n  function OAuth() {\n    _classCallCheck(this, OAuth);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(OAuth).apply(this, arguments));\n  }\n\n  _createClass(OAuth, [{\n    key: \"checkPopup\",\n    // previous lifecycle methods\n    // Routinely checks the popup to re-enable the login button \n    // if the user closes the popup without authenticating.\n    value: function checkPopup() {\n      var _this = this;\n\n      var check = setInterval(function () {\n        var popup = _this.popup;\n\n        if (!popup || popup.closed || popup.closed === undefined) {\n          clearInterval(check);\n\n          _this.setState({\n            disabled: ''\n          });\n        }\n      }, 1000);\n    } // Launches the popup by making a request to the server and then \n    // passes along the socket id so it can be used to send back user \n    // data to the appropriate socket on the connected client.\n\n  }, {\n    key: \"openPopup\",\n    value: function openPopup() {\n      var _this$props = this.props,\n          provider = _this$props.provider,\n          socket = _this$props.socket;\n      var width = 600,\n          height = 600;\n      var left = window.innerWidth / 2 - width / 2;\n      var top = window.innerHeight / 2 - height / 2;\n      var url = \"\".concat(API_URL, \"/\").concat(provider, \"?socketId=\").concat(socket.id);\n      return window.open(url, '', \"toolbar=no, location=no, directories=no, status=no, menubar=no, \\n        scrollbars=no, resizable=no, copyhistory=no, width=\".concat(width, \", \\n        height=\").concat(height, \", top=\").concat(top, \", left=\").concat(left));\n    } // Kicks off the processes of opening the popup on the server and listening \n    // to the popup. It also disables the login button so the user can not \n    // attempt to login to the provider twice.\n\n  }, {\n    key: \"startAuth\",\n    value: function startAuth(e) {\n      if (!this.state.disabled) {\n        e.preventDefault();\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    }\n  }, {\n    key: \"closeCard\",\n    value: function closeCard() {\n      this.setState({\n        user: {}\n      });\n    } // render method to follow\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state$user = this.state.user,\n          name = _this$state$user.name,\n          photo = _this$state$user.photo;\n      var provider = this.props.provider;\n      var disabled = this.state.disabled;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, name ? React.createElement(\"div\", {\n        className: 'card',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: photo,\n        alt: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }), React.createElement(FontAwesome, {\n        name: 'times-circle',\n        className: 'close',\n        onClick: this.closeCard.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, name)) : React.createElement(\"div\", {\n        className: 'button-wrapper fadein-fast',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.startAuth.bind(this),\n        className: \"\".concat(provider, \" \").concat(disabled, \" button\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(FontAwesome, {\n        name: provider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OAuth;\n}(Component);\n\nexport { OAuth as default };","map":{"version":3,"sources":["F:/Web/ReactJS/ReactMessage/message1/client/src/OAuth.js"],"names":["OAuth","check","setInterval","popup","closed","undefined","clearInterval","setState","disabled","props","provider","socket","width","height","left","window","innerWidth","top","innerHeight","url","API_URL","id","open","e","state","preventDefault","openPopup","checkPopup","user","name","photo","closeCard","bind","startAuth","Component"],"mappings":"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","sourcesContent":["export default class OAuth extends Component {\r\n  \r\n    // previous lifecycle methods\r\n  \r\n    // Routinely checks the popup to re-enable the login button \r\n    // if the user closes the popup without authenticating.\r\n    checkPopup() {\r\n      const check = setInterval(() => {\r\n        const { popup } = this\r\n        if (!popup || popup.closed || popup.closed === undefined) {\r\n          clearInterval(check)\r\n          this.setState({ disabled: ''})\r\n        }\r\n      }, 1000)\r\n    }\r\n    \r\n    // Launches the popup by making a request to the server and then \r\n    // passes along the socket id so it can be used to send back user \r\n    // data to the appropriate socket on the connected client.\r\n    openPopup() {\r\n      const { provider, socket } = this.props\r\n      const width = 600, height = 600\r\n      const left = (window.innerWidth / 2) - (width / 2)\r\n      const top = (window.innerHeight / 2) - (height / 2)\r\n      const url = `${API_URL}/${provider}?socketId=${socket.id}`\r\n  \r\n      return window.open(url, '',       \r\n        `toolbar=no, location=no, directories=no, status=no, menubar=no, \r\n        scrollbars=no, resizable=no, copyhistory=no, width=${width}, \r\n        height=${height}, top=${top}, left=${left}`\r\n      )\r\n    }\r\n  \r\n    // Kicks off the processes of opening the popup on the server and listening \r\n    // to the popup. It also disables the login button so the user can not \r\n    // attempt to login to the provider twice.\r\n    startAuth(e) {\r\n      if (!this.state.disabled) {\r\n        e.preventDefault()\r\n        this.popup = this.openPopup()  \r\n        this.checkPopup()\r\n        this.setState({disabled: 'disabled'})\r\n      }\r\n    }\r\n  \r\n    closeCard() {\r\n      this.setState({user: {}})\r\n    }\r\n  \r\n    // render method to follow\r\n    render() {\r\n        const { name, photo} = this.state.user\r\n        const { provider } = this.props\r\n        const { disabled } = this.state\r\n        \r\n        return (\r\n          <div>\r\n            {name\r\n              ? <div className={'card'}>              \r\n                  <img src={photo} alt={name} />\r\n                  <FontAwesome\r\n                    name={'times-circle'}\r\n                    className={'close'}\r\n                    onClick={this.closeCard.bind(this)}\r\n                  />\r\n                  <h4>{name}</h4>\r\n                </div>\r\n              : <div className={'button-wrapper fadein-fast'}>\r\n                  <button \r\n                    onClick={this.startAuth.bind(this)} \r\n                    className={`${provider} ${disabled} button`}\r\n                  >\r\n                    <FontAwesome\r\n                      name={provider}\r\n                    />\r\n                  </button>\r\n                </div>\r\n            }\r\n          </div>\r\n        )\r\n      }\r\n  }"]},"metadata":{},"sourceType":"module"}